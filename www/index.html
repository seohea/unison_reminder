<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=0.5, maximum-scale=0.5, width=device-width" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Righteous' rel='stylesheet' type='text/css'>

        <style type="text/css">
            * {
              border-radius: 0 !important;
              -moz-border-radius: 0 !important;
            }
            body{
                background-color: #333333;
            }
            #action_btns, #timetable{
                display: table;
                margin: 0 auto;
                padding-top: 50px;
            }
        </style>

        <title>UNISON提示</title>

        <script src="js/jquery.js"></script>
        <script src="js/bootstrap.min.js"></script>

        <script type="text/javascript">
            

            $(document).ready(function() {
                $.support.transition = false;

            });

            function trigger_noti(){
                cordova.plugins.notification.local.schedule({
                    id: 1,
                    title: "Fat reminder",
                    text: "Remind you to hit fat ah!",
                    sound: null,
                    every: 'minute'
                });
                alert('強化素材提醒開啟');
                update_status();
            }

            function cancel_noti(){
                cordova.plugins.notification.local.cancelAll(
                  function() {
                    alert('強化素材提醒取消');
                  }
                );
                update_status();
            }

            function update_status(){
                cordova.plugins.notification.local.isPresent(1, function (present) {
                    if(present){
                        $("#fat_on").hide();
                        $("#fat_off").show();
                    }else{
                        $("#fat_off").hide();
                        $("#fat_on").show();
                    }
                });
            }

            function get_all_id(){
                cordova.plugins.notification.local.getAllIds(function (ids) {
                    alert(ids);
                });
            }

            function monday(){
                //var time = [];
                var arr = [];
                for(var i=0; i<59; i++){
                    var date = new Date();
                    date.setHours(12);
                    date.setSeconds(0);
                    date.setMinutes(i);
                    var obj = { id: i, title: "Fat reminder", text: "Multi Notification " + i, at: date.toString()};
                    //nsole.log(obj.at);
                    arr.push(obj);
                }
                console.log(arr);
                return arr;
            }

            function test_schedule(){
                var d=new Date();
                //alert(d.getDay());
                //monday(d);
                cordova.plugins.notification.local.schedule(monday());
                alert('開啟');
            }

            //------ADS
            function onDeviceReady() {
                /*
                admob.createBannerView({
                  publisherId:"ca-app-pub-9969581706012169/7609471531"
                });
                */
                update_status();

                cordova.plugins.notification.local.on("clear", function(notification) {
                    alert("cleared: " + notification.id);
                });
            }
            document.addEventListener("deviceready", onDeviceReady, false);
            

        </script>

    </head>

    <body>
        <!--div class="app">
            <h1>PhoneGap</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
        </div-->

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-fixed-top" id="nav">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header page-scroll">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" onclick="$('#about-panel').hide();">
                        <span class="glyphicon glyphicon-cog" style="color:white;"></span>
                    </button>
                    <a class="navbar-brand" style="font-size:24px; font-family: 'Righteous', cursive;"><span class="glyphicon glyphicon-magnet"></span>&nbsp;UNISON提示 </a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="hidden">
                            <a href="#page-top"></a>
                        </li>
                        <li class="page-scroll">
                            <a href="#" onclick="" id="setting-clear">點擊輸入欄時不要自動清除</a>
                        </li>
                        <li class="page-scroll">
                            <a href="#" onclick="" id="setting-hkstyle">正統中文大寫</a>
                        </li>
                        <li class="page-scroll">
                            <a href="#" onclick="about();" id="about">關於</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <header>
            <div class="container" style="padding:30px 0px;">
                <!--div class="row">
                    <div class="col-lg-12">
                        <div class="intro-text">
                            <span class="skills">一個俾你了解呢個世界既地方</span>
                        </div>
                    </div>
                </div-->
            </div>
        </header>

        <div class="container">
            <div class="row">
                <div class="btn-group-vertical" role="group" aria-label="..." id="action_btns">
                    <button type="button" class="btn btn-default btn-lg" onclick="trigger_noti();" style="background-color:#004c99; border:0px;" id="fat_on">
                        強化素材提醒&nbsp;&nbsp;
                        <span class="badge" style="color:#004c99;background-color:grey;">ON</span>
                        <span class="badge" style="color:white;background-color:#ff9900;">OFF</span>
                    </button>
                    <button type="button" class="btn btn-default btn-lg" onclick="cancel_noti();" style="background-color:#004c99; border:0px;" id="fat_off">
                        強化素材提醒&nbsp;&nbsp;
                        <span class="badge" style="color:white;background-color:#ff9900;">ON</span>
                        <span class="badge" style="color:#004c99;background-color:grey;">OFF</span>
                    </button>
                    <button type="button" class="btn btn-default btn-lg" onclick="get_all_id();">Get all IDs</button>
                    <button type="button" class="btn btn-default btn-lg" onclick="test_schedule();">test schedule!</button>
                    <!--button type="button" class="btn btn-default btn-lg">Right&nbsp;&nbsp;<span class="badge">14</span></button-->
                </div>

                <div id="timetable" style="padding:20px">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                        <h3 class="panel-title">強化素材</h3>
                    </div>
                        <div class="panel-body">
                            <table class="table table-condensed">
                                <tr><td>日</td><td>0800-1000, 1400-1600, 2030-2100, 2130-0100</td></tr>
                                <tr><td>一</td><td>1130-1200, 1230-1400, 1730-1800, 1830-2000</td></tr>
                                <tr><td>二</td><td>0600-0800, 1130-1200, 1230-1400, 1730-1800, 1800-2000</td></tr>
                                <tr><td>三</td><td>0800-1000, 1400-1600, 2030-2100, 2130-2300</td></tr>
                                <tr><td>四</td><td>1000-1100, 1600-1700, 2030-2100, 2130-0100</td></tr>
                                <tr><td>五</td><td>1130-1200, 1230-1400, 1730-1800, 1830-2000</td></tr>
                                <tr><td>六</td><td>0600-0800, 1130-1200, 1230-1400, 1730-1800, 1830-2000</td></tr>
                            </table>
                        </div>
                    </div>
                    
                </div>
            </div>
            
        </div>

        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>

    </body>
</html>
